\section{Data Processing} \label{sec:BG:dataProcessing}


In order to use the acquired EMG signal in myoelectric prosthetic control, it first has to be processed. %, which is referred to as pre-processing, as it is a processing procedure that is done before further processing is performed. 
Since the acquisition and most processing is done in the MYB before Bluetooth transmission, further processing of the signal is moderate. In myoelectric prosthetic control, several features are extracted from each electrode-channel for use in control, instead of using the raw EMG signal. Thus, the amount of information given to the control system is increased compared to only providing the raw EMG signal to the control system. The following two sections will briefly describe theory behind filtering and feature extraction in relation to this project. 
%As described in \secref{sub:BG:MYB} the MYB has some build-in degree of signal filtering. Data received from the MYB is therefore not \textit{raw} as in a completely untouched EMG signal. However, the signals received from the MYB will from this point on be described as the raw EMG signal, since the EMG signal has not been processed by any of the implemented filtering specific for this study.


\subsection{Filtering} \label{sub:BG:filtering} %\label{sub:filt}

Filtering is a cornerstone in preparing an EMG signal for any kind of use. The frequency spectrum of EMG is 10 Hz to 500 Hz. \cite{Cram2012} According to the Nyquist theorem, to achieve a loss-less representation of the signal the sampling frequency must be at least twice the maximum frequency of interest of the original signal \cite{Pozzo2004}. Additionally, EMG is sensitive to movement artefacts and electrical interference. Due to these circumstances, filters are often implemented to remove these unwanted contributors \cite{DeLuca2010}. 
General practice in filtering the EMG signal will include implementing a notch filter with very narrow width and steep slope, at frequencies 49-51 Hz or 59-61 Hz depending on the power supply. The intent is to remove any electrical interference noise. In the low frequency spectrum several recommendations (5 Hz, 10 Hz and 20 Hz) has been made for optimal corner frequency of a high-pass filter to remove movement artefacts. A low pass filter is also typically used to remove any noise and unwanted signal above 500 Hz \cite{Cram2012}. 

This project will utilize a MYB for data acquisition and as mentioned in \subref{sub:BG:MYB} the MYB has a sample rate of 200 Hz. In relation to this project a sampling frequency of at least twice the maximum of the recorded signal is not possible \cite{Cram2012}. This would require a sample rate of at least 1000 Hz, which cannot be achieved due to limitations in the MYB. Under other circumstances it would be astute to implement an anti-aliasing filter. However, this is not possible with the MYB since an anti-aliasing filter should be implemented before the sampling, when sampling below twice the bandwidth of the signal. %As this happens inside the MYB as fabricated by Thalmic Labs it is impossible to change for this project. 

%The effect of the low sample rate of the MYB is aliasing in the recording, causing a frequency component not originally in the EMG signal. To account for this it would be resourceful to implement a low pass filter to act as an anti-aliasing filter.  

\subsection{Feature Extraction} \label{sub:BG:featureExtraction} % \label{sub:BG:featureExtraction} %\label{sub:fe}
The input signals used for myoelectric prosthetic control are features based on the raw EMG signal. This increases the amount of information given to the control system, which facilitates more robust pattern recognition. \\
There are numerous feature components from an EMG signal which can be extracted either from the time-domain, frequency-domain, or time-frequency domain. Most used are features from the time- and frequency-domain. Time-domain features can be categorized in five different types based on their mathematical properties: energy information, complexity information, frequency information, prediction modelling and time-dependency. Extracting features from the frequency-domain requires a frequency transformation, calculating the spectral properties of the recorded signal, which takes up longer processing time than simply using time-domain features. 
Time-domain features are often chosen based on their quick and easy implementation as they do not require any transformation before extraction and are calculated based on the raw EMG signal. In addition, it is important not to choose redundant features for the classifier. \cite{Phiny2012}% which would be to chose features providing similar information. \cite{Phiny2012} \\
Extracting features for real-time prosthetic control is done by taking segments of the continuous signal, called windows. Calculation on extracting features are done in these discreet windows. This is done instead of using the instantaneous value due to the signals random nature. These windows are often overlapped to create a dense information stream for extraction. The relationship between window and overlap length is significant, when trying to determine the best representation. The window length is a matter of getting enough samples to do the calculation, but too long a window will result in delays slowing the control. Smith et al. \cite{Smith2014} found that the optimal window length in a classification control scheme that enables best performance ranges from 150-250 ms. Overlapping the window is a method to faster acquire windows by reusing a determined last segment of the prior window. The amount of overlap is a compromise between classification quality and responsiveness of the prosthesis; a large overlap will provide a shorter output delay, but a worse classification and vice versa \cite{Farrell2007}.
